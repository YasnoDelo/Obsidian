В [[АнМех|анмехе]]
Из [[Уравнение Лагранжа|уравнений Лагранжа]]:$$\frac{d}{dt}\frac{\partial L}{\partial \dot{q}_i}-\frac{\partial L}{\partial q_i} = 0$$
Переменные $q, \dot{q}, t$ - переменные Лагранжа

Введём переменные $q, p, t$:
$$p_i = \frac{\partial L}{\partial \dot{q}_i} \qquad (1)$$
Такие переменные называют обобщёнными. $p$ - обобщённый импульс, $q$ - обобщённая координата

Воспользуемся [[Преобразование Лежандра|преобразованием Лежандра]] для функции $$L(q_i, \dot{q}_i, t)$$ по переменным $\dot{q}_i$:$$H(q_i, p_i, t) = \sum\limits_{i=1}^np_i\dot{q}_i - L(q_k, \dot{q}_k, t)\qquad(2)$$
Тут $\dot{q}_i$ выражены через $q_k, \dot{q}_k, t$ с помощью уравнения $(1)$. Тут $q_i, t$ - параметры.
$$H - функция\quadГамильтона$$
Запишем её полный дифференциал:$$dH = \sum\limits_{i = 1}^n\frac{\partial H}{\partial q_i}dq_i+\sum\limits_{i = 1}^n\frac{\partial H}{\partial p_i}dp_i+\frac{\partial H}{\partial t}dt$$
Запишем полный дифференциал из формулы (2)$$dH = \sum\limits_{i = 1}^n\dot{q}_i d p_i - \sum\limits_{i = 1}^n\frac{\partial L}{\partial q_i} dq_i - \frac{\partial L}{\partial t}dt$$
Приравниваем $dH = dH$, тогда коэффициенты при независимых переменных  должны совпадать:$$\frac{\partial H}{\partial q_i} = -\frac{\partial L}{\partial q_i}$$$$\frac{\partial H}{\partial p_i} = \dot{q}_i$$$$\frac{\partial H}{\partial t} = -\frac{\partial L}{\partial t}$$
То есть получаем Уравнения Гамильтона (они же канонические):
$$\frac{\partial q_i}{\partial t} = \frac{\partial H}{\partial p_i}$$$$\frac{\partial p_i}{\partial t} = - \frac{\partial H}{\partial q_i}$$