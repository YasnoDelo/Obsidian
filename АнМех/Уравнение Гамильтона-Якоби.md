Найдем свободное унивалентное [[Канонические преобразования|каноническое преобразование]], для которого гамильтониан в новых переменных равен нулю: $\tilde H = 0$. При такой постановке задачи критерий каноничности в свободных переменных имеет вид: $$
∑︁\tilde{p_i} d \tilde{q_i}=c\left(∑︁p_i dq_i − Hdt\right) - dS (\vec q, \tilde{\vec q} , t) $$
Связь между каноническим преобразованием и производящей функцией:$$\begin{cases}
\tilde p_i = - \frac{\partial S}{\partial \tilde q_i}\\
cp_i = \frac{\partial S}{\partial q_i}
\end{cases}$$
и выражение для функции Гамильтона в свободных переменных: $$\widetilde H  = cH + \frac{∂S}{∂t}$$
Подставляя эти уравнения в [[Канонические преобразования^]]критерий каноничности и учитывая, что
$\tilde H = 0, c = 1$$$

— уравнение Гамильтона-Якоби.